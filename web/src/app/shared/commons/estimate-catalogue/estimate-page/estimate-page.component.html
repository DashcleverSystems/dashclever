<app-card title="components.estimatePage.title">
  <div class="table-container">
    <div class="filters">
      <input
        pInputText
        type="text"
        class="estimateId"
        [placeholder]="'components.estimatePage.filters.estimateId' | translate"
        [(ngModel)]="filters.estimateId"
        (ngModelChange)="checkEmpty($event)"
      />
      <p-calendar
        class="createdAfter"
        [placeholder]="
          'components.estimatePage.filters.createdAfter' | translate
        "
        (onClear)="setCreatedAfterFilter($event)"
        (onSelect)="setCreatedAfterFilter($event)"
        [showTime]="true"
        [showClear]="true"
        [showIcon]="true"
      />
      <p-button
        (click)="onFilter(filters)"
        icon="pi pi-search"
        size="medium"
        class="submit"
      />
    </div>

    <p-table [value]="data$ | async">
      <ng-template pTemplate="header">
        <tr>
          <th>{{ 'components.estimatePage.estimateId' | translate }}</th>
          <th>
            {{ 'components.estimatePage.creationTimestamp' | translate }}
          </th>
          <th class="plan-icon-column"></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-estimate>
        <tr>
          <td>{{ estimate.estimateId }}</td>
          <td>{{ estimate.creationTimestamp | date: 'YYYY-MM-d HH:mm' }}</td>
          <td class="plan-icon-column">
            <div>
              <i
                class="pi pi-book pointer"
                pTooltip="{{
                  'components.estimatePage.createPlanning' | translate
                }}"
                (click)="createPlanningFromEstimate(estimate)"
              ></i>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
    <p-paginator
      (onPageChange)="primePageChange($event)"
      [rows]="size"
      [totalRecords]="totalElements$ | async"
      [rowsPerPageOptions]="rowsPerPage"
    ></p-paginator>
  </div>
</app-card>
